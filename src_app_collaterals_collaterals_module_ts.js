"use strict";(self.webpackChunkmifosx_web_app=self.webpackChunkmifosx_web_app||[]).push([["src_app_collaterals_collaterals_module_ts"],{19750:(k,U,o)=>{o.r(U),o.d(U,{CollateralsModule:()=>X});var Z=o(36895),y=o(78434),b=o(98587),x=o(35503),c=o(83689),f=o(96617),A=o(13450),t=o(94650),v=o(80529);let g=(()=>{class e{constructor(a){this.http=a}getFilteredClients(a,n,r,s,d){let p=(new v.LE).set("displayName",s).set("orphansOnly",r.toString()).set("sortOrder",n).set("orderBy",a);return d&&(p=p.set("officeId",d)),this.http.get("/clients",{params:p})}getClientCollateral(a,n){return this.http.get(`/clients/${a}/collaterals/${n}`)}updateClientCollateral(a,n,r){return this.http.put(`/clients/${a}/collaterals/${n}`,r)}deleteCollateral(a,n){return this.http.delete(`/clients/${a}/collaterals/${n}`)}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(v.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var D=o(65412),w=o(3868),m=o(1576),T=o(4859),C=o(73546),i=o(30671),q=o(30998),M=o(35769);const L=function(){return["edit"]};function P(e,l){1&e&&(t.TgZ(0,"button",16),t._uU(1,"\n      "),t._UZ(2,"fa-icon",17),t._uU(3,"\n      Edit\n    "),t.qZA()),2&e&&t.Q6J("routerLink",t.DdM(1,L))}function O(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(a);const r=t.oxw();return t.KtG(r.deleteCollateral())}),t._uU(1,"\n      "),t._UZ(2,"fa-icon",19),t._uU(3,"\n      Delete\n    "),t.qZA()}}function R(e,l){1&e&&(t.TgZ(0,"th",20),t._uU(1," ID "),t.qZA())}function I(e,l){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const a=l.$implicit;t.xp6(1),t.hij("\n                ",a.loanId,"\n                ")}}function N(e,l){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Last Repayment"),t.qZA())}function Y(e,l){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const a=l.$implicit;t.xp6(1),t.hij(" ",a.lastRepayment," ")}}function F(e,l){1&e&&(t.TgZ(0,"th",20),t._uU(1," Remaining Amount "),t.qZA())}function S(e,l){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const a=l.$implicit;t.xp6(1),t.hij(" ",a.remainingAmount," ")}}function Q(e,l){1&e&&(t.TgZ(0,"th",20),t._uU(1," Last Repayment Date "),t.qZA())}function V(e,l){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"dateFormat"),t.qZA()),2&e){const a=l.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.lastRepaymentDate)," ")}}function E(e,l){1&e&&t._UZ(0,"tr",22)}function J(e,l){1&e&&t._UZ(0,"tr",23)}let B=(()=>{class e{constructor(a,n,r,s){this.route=a,this.collateralsService=n,this.router=r,this.dialog=s,this.collateralColumns=["ID","Last Repayment","Remaining Amount","Last Repayment Date"],this.route.data.subscribe(d=>{this.clientCollateralData=d.clientCollateralData})}ngOnInit(){}deleteCollateral(){this.dialog.open(A.F,{data:{deleteContext:`collateral ${this.clientCollateralData.id}`}}).afterClosed().subscribe(n=>{n.delete&&this.collateralsService.deleteCollateral(this.clientCollateralData.clientId,this.clientCollateralData.id).subscribe(()=>{this.router.navigate(["../../"],{relativeTo:this.route})})})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(c.gz),t.Y36(g),t.Y36(c.F0),t.Y36(D.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["mifosx-view-collateral"]],decls:72,vars:9,consts:[["fxLayout","row","fxLayoutAlign","end","fxLayoutGap","2%","fxLayout.lt-md","column",1,"container","m-b-20"],["mat-raised-button","","color","primary",3,"routerLink",4,"mifosxHasPermission"],["mat-raised-button","","color","warn",3,"click",4,"mifosxHasPermission"],[1,"client-collateral-card"],[1,"content"],[1,"tab-container","mat-typography"],["fxLayout","row","fxLayoutGap","32px",1,"group-details-container","m-b-30"],["mat-table","",1,"mat-elevation-z1","m-b-30",3,"dataSource"],["matColumnDef","ID"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Last Repayment"],["matColumnDef","Remaining Amount"],["matColumnDef","Last Repayment Date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-raised-button","","color","primary",3,"routerLink"],["icon","edit",1,"m-r-10"],["mat-raised-button","","color","warn",3,"click"],["icon","trash",1,"m-r-10"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,n){1&a&&(t.TgZ(0,"div",0),t._uU(1,"\n    "),t.YNc(2,P,4,2,"button",1),t._uU(3,"\n    "),t.YNc(4,O,4,0,"button",2),t._uU(5,"\n  "),t.qZA(),t._uU(6,"\n\n"),t.TgZ(7,"mat-card",3),t._uU(8,"\n\n    "),t.TgZ(9,"mat-card-content",4),t._uU(10,"\\\n\n        "),t.TgZ(11,"div",5),t._uU(12,"\n\n            "),t.TgZ(13,"h3"),t._uU(14,"Client Collateral Details"),t.qZA(),t._uU(15,"\n\n            "),t.TgZ(16,"div",6),t._uU(17,"\n              "),t.TgZ(18,"p"),t._uU(19),t._UZ(20,"br"),t._uU(21),t._UZ(22,"br"),t._uU(23),t._UZ(24,"br"),t._uU(25),t._UZ(26,"br"),t._uU(27,"\n              "),t.qZA(),t._uU(28,"\n\n            "),t.qZA(),t._uU(29,"\n\n\n            "),t.TgZ(30,"h3"),t._uU(31,"Transaction Details"),t.qZA(),t._uU(32,"\n\n            "),t.TgZ(33,"table",7),t._uU(34,"\n\n            "),t.ynx(35,8),t._uU(36,"\n                "),t.YNc(37,R,2,0,"th",9),t._uU(38,"\n                "),t.YNc(39,I,2,1,"td",10),t._uU(40,"\n            "),t.BQk(),t._uU(41,"\n\n            "),t.ynx(42,11),t._uU(43,"\n                "),t.YNc(44,N,2,0,"th",9),t._uU(45,"\n                "),t.YNc(46,Y,2,1,"td",10),t._uU(47,"\n            "),t.BQk(),t._uU(48,"\n\n            "),t.ynx(49,12),t._uU(50,"\n                "),t.YNc(51,F,2,0,"th",9),t._uU(52,"\n                "),t.YNc(53,S,2,1,"td",10),t._uU(54,"\n            "),t.BQk(),t._uU(55,"\n\n            "),t.ynx(56,13),t._uU(57,"\n                "),t.YNc(58,Q,2,0,"th",9),t._uU(59,"\n                "),t.YNc(60,V,3,3,"td",10),t._uU(61,"\n\n            "),t.BQk(),t._uU(62,"\n\n            "),t._uU(63,"\n            "),t.YNc(64,E,1,0,"tr",14),t._uU(65,"\n            "),t.YNc(66,J,1,0,"tr",15),t._uU(67,"\n\n            "),t.qZA(),t._uU(68,"\n\n        "),t.qZA(),t._uU(69,"\n\n\n    "),t.qZA(),t._uU(70,"\n\n"),t.qZA(),t._uU(71,"\n")),2&a&&(t.xp6(2),t.Q6J("mifosxHasPermission","UPDATE_CHARGE"),t.xp6(2),t.Q6J("mifosxHasPermission","DELETE_CHARGE"),t.xp6(15),t.hij("\n                Name: ",n.clientCollateralData.name,""),t.xp6(2),t.hij("\n                Quantity: ",n.clientCollateralData.quantity,""),t.xp6(2),t.hij("\n                Total Value: ",n.clientCollateralData.total,""),t.xp6(2),t.hij("\n                Total Collateral Value: ",n.clientCollateralData.totalCollateral,""),t.xp6(8),t.Q6J("dataSource",n.clientCollateralData.loanTransactionData),t.xp6(31),t.Q6J("matHeaderRowDef",n.collateralColumns),t.xp6(2),t.Q6J("matRowDefColumns",n.collateralColumns))},dependencies:[c.rH,w.BN,m.xw,m.SQ,m.Wh,T.lW,C.a8,C.dn,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,q.A,M.E],styles:[".client-collateral-card[_ngcontent-%COMP%]{margin:0 auto;max-width:80rem;width:90%;padding:0}.tab-container[_ngcontent-%COMP%]{padding:1%;margin:1%}.tab-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1% auto}.tab-container[_ngcontent-%COMP%]   .group-details-container[_ngcontent-%COMP%]{border:1px solid;padding:1%}.tab-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{margin-left:auto}.tab-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.tab-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .account-action-button[_ngcontent-%COMP%]{min-width:26px;padding:0 6px;margin:4px;line-height:25px}.tab-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.select-row[_ngcontent-%COMP%]:hover, .tab-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),e})(),_=(()=>{class e{constructor(a){this.collateralsService=a}resolve(a){const n=a.parent.paramMap.get("clientId"),r=a.parent.paramMap.get("collateralId");return this.collateralsService.getClientCollateral(n,r)}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(g))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var u=o(24006),j=o(99639),h=o(59549),H=o(284);function G(e,l){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"\n                                Quantity is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA(),t._uU(4,"\n                            "),t.qZA())}const $=function(){return["../../"]};let z=(()=>{class e{constructor(a,n,r,s,d){this.formBuilder=a,this.route=n,this.router=r,this.settingsService=s,this.collateralService=d,this.route.data.subscribe(p=>{this.collateralDetails=p.clientCollateralData}),this.clientId=this.route.parent.snapshot.params.clientId}ngOnInit(){this.createClientCollateralForm()}createClientCollateralForm(){this.clientCollateralForm=this.formBuilder.group({quantity:["",u.kI.required],name:[{value:"",disabled:!0}],total:[{value:"",disabled:!0}],totalCollateral:[{value:"",disabled:!0}]}),this.clientCollateralForm.patchValue({name:this.collateralDetails.name,quantity:this.collateralDetails.quantity,total:this.collateralDetails.total,totalCollateral:this.collateralDetails.totalCollateral})}submit(){this.collateralService.updateClientCollateral(this.clientId,this.collateralDetails.id,{quantity:this.clientCollateralForm.value.quantity,locale:this.settingsService.language.code}).subscribe(()=>{this.router.navigate(["../"],{relativeTo:this.route})})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.QS),t.Y36(c.gz),t.Y36(c.F0),t.Y36(j.g),t.Y36(g))},e.\u0275cmp=t.Xpm({type:e,selectors:[["mifosx-edit-collateral"]],decls:60,vars:5,consts:[[1,"container"],[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","required","","formControlName","name"],["matInput","","required","","formControlName","quantity"],[4,"ngIf"],["matInput","","required","","formControlName","total"],["matInput","","required","","formControlName","totalCollateral"],["fxLayoutGap","5px","fxLayout","row","fsLayout.xs","column","fxLayoutAlign","center"],["type","button","mat-raised-button","",3,"routerLink"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0),t._uU(1,"\n\n    "),t.TgZ(2,"mat-card"),t._uU(3,"\n\n        "),t.TgZ(4,"form",1),t.NdJ("ngSubmit",function(){return n.submit()}),t._uU(5,"\n\n            "),t.TgZ(6,"mat-card-content"),t._uU(7,"\n\n                "),t.TgZ(8,"div",2),t._uU(9,"\n                    \n                    "),t.TgZ(10,"div",2),t._uU(11,"\n\n                        "),t.TgZ(12,"mat-form-field"),t._uU(13,"\n                            "),t.TgZ(14,"mat-label"),t._uU(15,"Name"),t.qZA(),t._uU(16,"\n                            "),t._UZ(17,"input",3),t._uU(18,"\n                        "),t.qZA(),t._uU(19,"\n\n                        "),t.TgZ(20,"mat-form-field"),t._uU(21,"\n                            "),t.TgZ(22,"mat-label"),t._uU(23,"Quantity"),t.qZA(),t._uU(24,"\n                            "),t._UZ(25,"input",4),t._uU(26,"\n                            "),t.YNc(27,G,5,0,"mat-error",5),t._uU(28,"\n                        "),t.qZA(),t._uU(29,"\n\n                        "),t.TgZ(30,"mat-form-field"),t._uU(31,"\n                            "),t.TgZ(32,"mat-label"),t._uU(33,"Total"),t.qZA(),t._uU(34,"\n                            "),t._UZ(35,"input",6),t._uU(36,"\n                        "),t.qZA(),t._uU(37,"\n\n                        "),t.TgZ(38,"mat-form-field"),t._uU(39,"\n                            "),t.TgZ(40,"mat-label"),t._uU(41,"Total Collateral Value"),t.qZA(),t._uU(42,"\n                            "),t._UZ(43,"input",7),t._uU(44,"\n                        "),t.qZA(),t._uU(45,"\n\n                    "),t.qZA(),t._uU(46,"\n\n                "),t.qZA(),t._uU(47,"\n\n            "),t.qZA(),t._uU(48,"\n\n            "),t.TgZ(49,"mat-card-actions",8),t._uU(50,"\n                "),t.TgZ(51,"button",9),t._uU(52,"Cancel"),t.qZA(),t._uU(53,"\n                "),t.TgZ(54,"button",10),t._uU(55,"Submit"),t.qZA(),t._uU(56," \n            "),t.qZA(),t._uU(57,"\n\n        "),t.qZA(),t._uU(58,"\n    \n    "),t.qZA(),t._uU(59,"\n\n"),t.qZA()),2&a&&(t.xp6(4),t.Q6J("formGroup",n.clientCollateralForm),t.xp6(23),t.Q6J("ngIf",n.clientCollateralForm.controls.quantity.hasError("required")),t.xp6(24),t.Q6J("routerLink",t.DdM(4,$)),t.xp6(3),t.Q6J("disabled",!n.clientCollateralForm.valid))},dependencies:[Z.O5,c.rH,m.xw,m.SQ,m.Wh,T.lW,C.a8,C.dn,C.hq,h.TO,h.KE,h.hX,H.Nt,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u],styles:[".container[_ngcontent-%COMP%]{width:37rem}"]}),e})();const K=[{path:"",data:{title:(0,f.K)("Collateral"),breadcrumb:"Collateral",routeParamBreadcrumb:!1},children:[{path:":collateralId",data:{title:(0,f.K)("Collateral View"),routeParamBreadcrumb:"collateralId"},children:[{path:"",component:B,resolve:{clientCollateralData:_}},{path:"edit",data:{title:(0,f.K)("edit"),routeParamBreadcrumb:"edit"},component:z,resolve:{clientCollateralData:_}}]}]}];let W=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[_],imports:[c.Bz.forChild(K),c.Bz]}),e})(),X=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[Z.ez,W,b.m,y.o,x.D]}),e})()}}]);