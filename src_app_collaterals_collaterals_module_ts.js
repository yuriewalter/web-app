"use strict";(self.webpackChunkmifosx_web_app=self.webpackChunkmifosx_web_app||[]).push([["src_app_collaterals_collaterals_module_ts"],{19750:function(et,y,o){o.r(y),o.d(y,{CollateralsModule:function(){return at}});var C=o(43144),f=o(15671),T=o(69808),A=o(78434),D=o(87736),w=o(35503),s=o(30325),h=o(96617),M=o(13450),t=o(5e3),b=o(40520),U=function(){var a=function(){function n(e){(0,f.Z)(this,n),this.http=e}return(0,C.Z)(n,[{key:"getFilteredClients",value:function(l,r,i,d,m){var v=(new b.LE).set("displayName",d).set("orphansOnly",i.toString()).set("sortOrder",r).set("orderBy",l);return m&&(v=v.set("officeId",m)),this.http.get("/clients",{params:v})}},{key:"getClientCollateral",value:function(l,r){return this.http.get("/clients/".concat(l,"/collaterals/").concat(r))}},{key:"updateClientCollateral",value:function(l,r,i){return this.http.put("/clients/".concat(l,"/collaterals/").concat(r),i)}},{key:"deleteCollateral",value:function(l,r){return this.http.delete("/clients/".concat(l,"/collaterals/").concat(r))}}]),n}();return a.\u0275fac=function(e){return new(e||a)(t.LFG(b.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),q=o(48966),p=o(77093),L=o(30998),x=o(47423),O=o(49444),g=o(9224),u=o(32075),P=o(35769),I=function(){return["edit"]};function R(a,n){1&a&&(t.TgZ(0,"button",16),t._uU(1,"\n      "),t._UZ(2,"fa-icon",17),t._uU(3,"\n      Edit\n    "),t.qZA()),2&a&&t.Q6J("routerLink",t.DdM(1,I))}function F(a,n){if(1&a){var e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().deleteCollateral()}),t._uU(1,"\n      "),t._UZ(2,"fa-icon",19),t._uU(3,"\n      Delete\n    "),t.qZA()}}function N(a,n){1&a&&(t.TgZ(0,"th",20),t._uU(1," ID "),t.qZA())}function Y(a,n){if(1&a&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&a){var e=n.$implicit;t.xp6(1),t.hij("\n                ",e.loanId,"\n                ")}}function S(a,n){1&a&&(t.TgZ(0,"th",20),t._uU(1,"Last Repayment"),t.qZA())}function V(a,n){if(1&a&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&a){var e=n.$implicit;t.xp6(1),t.hij(" ",e.lastRepayment," ")}}function Q(a,n){1&a&&(t.TgZ(0,"th",20),t._uU(1," Remaining Amount "),t.qZA())}function E(a,n){if(1&a&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&a){var e=n.$implicit;t.xp6(1),t.hij(" ",e.remainingAmount," ")}}function J(a,n){1&a&&(t.TgZ(0,"th",20),t._uU(1," Last Repayment Date "),t.qZA())}function B(a,n){if(1&a&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"dateFormat"),t.qZA()),2&a){var e=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.lastRepaymentDate)," ")}}function j(a,n){1&a&&t._UZ(0,"tr",22)}function H(a,n){1&a&&t._UZ(0,"tr",23)}var G=function(){var a=function(){function n(e,l,r,i){var d=this;(0,f.Z)(this,n),this.route=e,this.collateralsService=l,this.router=r,this.dialog=i,this.collateralColumns=["ID","Last Repayment","Remaining Amount","Last Repayment Date"],this.route.data.subscribe(function(m){d.clientCollateralData=m.clientCollateralData})}return(0,C.Z)(n,[{key:"ngOnInit",value:function(){}},{key:"deleteCollateral",value:function(){var l=this;this.dialog.open(M.F,{data:{deleteContext:"collateral ".concat(this.clientCollateralData.id)}}).afterClosed().subscribe(function(i){i.delete&&l.collateralsService.deleteCollateral(l.clientCollateralData.clientId,l.clientCollateralData.id).subscribe(function(){l.router.navigate(["../../"],{relativeTo:l.route})})})}}]),n}();return a.\u0275fac=function(e){return new(e||a)(t.Y36(s.gz),t.Y36(U),t.Y36(s.F0),t.Y36(q.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mifosx-view-collateral"]],decls:72,vars:9,consts:[["fxLayout","row","fxLayoutAlign","end","fxLayoutGap","2%","fxLayout.lt-md","column",1,"container","m-b-20"],["mat-raised-button","","color","primary",3,"routerLink",4,"mifosxHasPermission"],["mat-raised-button","","color","warn",3,"click",4,"mifosxHasPermission"],[1,"client-collateral-card"],[1,"content"],[1,"tab-container","mat-typography"],["fxLayout","row","fxLayoutGap","32px",1,"group-details-container","m-b-30"],["mat-table","",1,"mat-elevation-z1","m-b-30",3,"dataSource"],["matColumnDef","ID"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Last Repayment"],["matColumnDef","Remaining Amount"],["matColumnDef","Last Repayment Date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-raised-button","","color","primary",3,"routerLink"],["icon","edit",1,"m-r-10"],["mat-raised-button","","color","warn",3,"click"],["icon","trash",1,"m-r-10"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,l){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n    "),t.YNc(2,R,4,2,"button",1),t._uU(3,"\n    "),t.YNc(4,F,4,0,"button",2),t._uU(5,"\n  "),t.qZA(),t._uU(6,"\n\n"),t.TgZ(7,"mat-card",3),t._uU(8,"\n\n    "),t.TgZ(9,"mat-card-content",4),t._uU(10,"\\\n\n        "),t.TgZ(11,"div",5),t._uU(12,"\n\n            "),t.TgZ(13,"h3"),t._uU(14,"Client Collateral Details"),t.qZA(),t._uU(15,"\n\n            "),t.TgZ(16,"div",6),t._uU(17,"\n              "),t.TgZ(18,"p"),t._uU(19),t._UZ(20,"br"),t._uU(21),t._UZ(22,"br"),t._uU(23),t._UZ(24,"br"),t._uU(25),t._UZ(26,"br"),t._uU(27,"\n              "),t.qZA(),t._uU(28,"\n\n            "),t.qZA(),t._uU(29,"\n\n\n            "),t.TgZ(30,"h3"),t._uU(31,"Transaction Details"),t.qZA(),t._uU(32,"\n\n            "),t.TgZ(33,"table",7),t._uU(34,"\n\n            "),t.ynx(35,8),t._uU(36,"\n                "),t.YNc(37,N,2,0,"th",9),t._uU(38,"\n                "),t.YNc(39,Y,2,1,"td",10),t._uU(40,"\n            "),t.BQk(),t._uU(41,"\n\n            "),t.ynx(42,11),t._uU(43,"\n                "),t.YNc(44,S,2,0,"th",9),t._uU(45,"\n                "),t.YNc(46,V,2,1,"td",10),t._uU(47,"\n            "),t.BQk(),t._uU(48,"\n\n            "),t.ynx(49,12),t._uU(50,"\n                "),t.YNc(51,Q,2,0,"th",9),t._uU(52,"\n                "),t.YNc(53,E,2,1,"td",10),t._uU(54,"\n            "),t.BQk(),t._uU(55,"\n\n            "),t.ynx(56,13),t._uU(57,"\n                "),t.YNc(58,J,2,0,"th",9),t._uU(59,"\n                "),t.YNc(60,B,3,3,"td",10),t._uU(61,"\n\n            "),t.BQk(),t._uU(62,"\n\n            "),t._uU(63,"\n            "),t.YNc(64,j,1,0,"tr",14),t._uU(65,"\n            "),t.YNc(66,H,1,0,"tr",15),t._uU(67,"\n\n            "),t.qZA(),t._uU(68,"\n\n        "),t.qZA(),t._uU(69,"\n\n\n    "),t.qZA(),t._uU(70,"\n\n"),t.qZA(),t._uU(71,"\n")),2&e&&(t.xp6(2),t.Q6J("mifosxHasPermission","UPDATE_CHARGE"),t.xp6(2),t.Q6J("mifosxHasPermission","DELETE_CHARGE"),t.xp6(15),t.hij("\n                Name: ",l.clientCollateralData.name,""),t.xp6(2),t.hij("\n                Quantity: ",l.clientCollateralData.quantity,""),t.xp6(2),t.hij("\n                Total Value: ",l.clientCollateralData.total,""),t.xp6(2),t.hij("\n                Total Collateral Value: ",l.clientCollateralData.totalCollateral,""),t.xp6(8),t.Q6J("dataSource",l.clientCollateralData.loanTransactionData),t.xp6(31),t.Q6J("matHeaderRowDef",l.collateralColumns),t.xp6(2),t.Q6J("matRowDefColumns",l.collateralColumns))},directives:[p.xw,p.Wh,p.SQ,L.A,x.lW,s.rH,O.BN,g.a8,g.dn,u.BZ,u.w1,u.fO,u.ge,u.Dz,u.ev,u.as,u.XQ,u.nj,u.Gk],pipes:[P.E],styles:[".client-collateral-card[_ngcontent-%COMP%]{margin:0 auto;max-width:80rem;width:90%;padding:0}.tab-container[_ngcontent-%COMP%]{padding:1%;margin:1%}.tab-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1% auto}.tab-container[_ngcontent-%COMP%]   .group-details-container[_ngcontent-%COMP%]{border:1px solid;padding:1%}.tab-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{margin-left:auto}.tab-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.tab-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .account-action-button[_ngcontent-%COMP%]{min-width:26px;padding:0 6px;margin:4px;line-height:25px}.tab-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.select-row[_ngcontent-%COMP%]:hover, .tab-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),a}(),_=function(){var a=function(){function n(e){(0,f.Z)(this,n),this.collateralsService=e}return(0,C.Z)(n,[{key:"resolve",value:function(l){var r=l.parent.paramMap.get("clientId"),i=l.parent.paramMap.get("collateralId");return this.collateralsService.getClientCollateral(r,i)}}]),n}();return a.\u0275fac=function(e){return new(e||a)(t.LFG(U))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac}),a}(),c=o(93075),z=o(99639),Z=o(67322),k=o(98833);function K(a,n){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"\n                                Quantity is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA(),t._uU(4,"\n                            "),t.qZA())}var W=function(){return["../../"]},X=function(){var a=function(){function n(e,l,r,i,d){var m=this;(0,f.Z)(this,n),this.formBuilder=e,this.route=l,this.router=r,this.settingsService=i,this.collateralService=d,this.route.data.subscribe(function(v){m.collateralDetails=v.clientCollateralData}),this.clientId=this.route.parent.snapshot.params.clientId}return(0,C.Z)(n,[{key:"ngOnInit",value:function(){this.createClientCollateralForm()}},{key:"createClientCollateralForm",value:function(){this.clientCollateralForm=this.formBuilder.group({quantity:["",c.kI.required],name:[{value:"",disabled:!0}],total:[{value:"",disabled:!0}],totalCollateral:[{value:"",disabled:!0}]}),this.clientCollateralForm.patchValue({name:this.collateralDetails.name,quantity:this.collateralDetails.quantity,total:this.collateralDetails.total,totalCollateral:this.collateralDetails.totalCollateral})}},{key:"submit",value:function(){var l=this;this.collateralService.updateClientCollateral(this.clientId,this.collateralDetails.id,{quantity:this.clientCollateralForm.value.quantity,locale:this.settingsService.language.code}).subscribe(function(){l.router.navigate(["../"],{relativeTo:l.route})})}}]),n}();return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.qu),t.Y36(s.gz),t.Y36(s.F0),t.Y36(z.g),t.Y36(U))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mifosx-edit-collateral"]],decls:60,vars:5,consts:[[1,"container"],[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","required","","formControlName","name"],["matInput","","required","","formControlName","quantity"],[4,"ngIf"],["matInput","","required","","formControlName","total"],["matInput","","required","","formControlName","totalCollateral"],["fxLayoutGap","5px","fxLayout","row","fsLayout.xs","column","fxLayoutAlign","center"],["type","button","mat-raised-button","",3,"routerLink"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(e,l){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n\n    "),t.TgZ(2,"mat-card"),t._uU(3,"\n\n        "),t.TgZ(4,"form",1),t.NdJ("ngSubmit",function(){return l.submit()}),t._uU(5,"\n\n            "),t.TgZ(6,"mat-card-content"),t._uU(7,"\n\n                "),t.TgZ(8,"div",2),t._uU(9,"\n                    \n                    "),t.TgZ(10,"div",2),t._uU(11,"\n\n                        "),t.TgZ(12,"mat-form-field"),t._uU(13,"\n                            "),t.TgZ(14,"mat-label"),t._uU(15,"Name"),t.qZA(),t._uU(16,"\n                            "),t._UZ(17,"input",3),t._uU(18,"\n                        "),t.qZA(),t._uU(19,"\n\n                        "),t.TgZ(20,"mat-form-field"),t._uU(21,"\n                            "),t.TgZ(22,"mat-label"),t._uU(23,"Quantity"),t.qZA(),t._uU(24,"\n                            "),t._UZ(25,"input",4),t._uU(26,"\n                            "),t.YNc(27,K,5,0,"mat-error",5),t._uU(28,"\n                        "),t.qZA(),t._uU(29,"\n\n                        "),t.TgZ(30,"mat-form-field"),t._uU(31,"\n                            "),t.TgZ(32,"mat-label"),t._uU(33,"Total"),t.qZA(),t._uU(34,"\n                            "),t._UZ(35,"input",6),t._uU(36,"\n                        "),t.qZA(),t._uU(37,"\n\n                        "),t.TgZ(38,"mat-form-field"),t._uU(39,"\n                            "),t.TgZ(40,"mat-label"),t._uU(41,"Total Collateral Value"),t.qZA(),t._uU(42,"\n                            "),t._UZ(43,"input",7),t._uU(44,"\n                        "),t.qZA(),t._uU(45,"\n\n                    "),t.qZA(),t._uU(46,"\n\n                "),t.qZA(),t._uU(47,"\n\n            "),t.qZA(),t._uU(48,"\n\n            "),t.TgZ(49,"mat-card-actions",8),t._uU(50,"\n                "),t.TgZ(51,"button",9),t._uU(52,"Cancel"),t.qZA(),t._uU(53,"\n                "),t.TgZ(54,"button",10),t._uU(55,"Submit"),t.qZA(),t._uU(56," \n            "),t.qZA(),t._uU(57,"\n\n        "),t.qZA(),t._uU(58,"\n    \n    "),t.qZA(),t._uU(59,"\n\n"),t.qZA()),2&e&&(t.xp6(4),t.Q6J("formGroup",l.clientCollateralForm),t.xp6(23),t.Q6J("ngIf",l.clientCollateralForm.controls.quantity.hasError("required")),t.xp6(24),t.Q6J("routerLink",t.DdM(4,W)),t.xp6(3),t.Q6J("disabled",!l.clientCollateralForm.valid))},directives:[g.a8,c._Y,c.JL,c.sg,g.dn,p.xw,Z.KE,Z.hX,k.Nt,c.Fj,c.Q7,c.JJ,c.u,T.O5,Z.TO,g.hq,p.SQ,p.Wh,x.lW,s.rH],styles:[".container[_ngcontent-%COMP%]{width:37rem}"]}),a}(),$=[{path:"",data:{title:(0,h.K)("Collateral"),breadcrumb:"Collateral",routeParamBreadcrumb:!1},children:[{path:":collateralId",data:{title:(0,h.K)("Collateral View"),routeParamBreadcrumb:"collateralId"},children:[{path:"",component:G,resolve:{clientCollateralData:_}},{path:"edit",data:{title:(0,h.K)("edit"),routeParamBreadcrumb:"edit"},component:X,resolve:{clientCollateralData:_}}]}]}],tt=function(){var a=(0,C.Z)(function n(){(0,f.Z)(this,n)});return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[_],imports:[[s.Bz.forChild($)],s.Bz]}),a}(),at=function(){var a=(0,C.Z)(function n(){(0,f.Z)(this,n)});return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[T.ez,tt,D.m,A.o,w.D]]}),a}()}}]);